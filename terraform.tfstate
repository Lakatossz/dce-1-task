{
  "version": 4,
  "terraform_version": "1.9.6",
  "serial": 36,
  "lineage": "015d45cc-0871-3436-b6f8-03cccb57912a",
  "outputs": {
    "backend_nodes": {
      "value": [
        "147.228.173.181",
        "147.228.173.114",
        "147.228.173.182"
      ],
      "type": [
        "tuple",
        [
          "string",
          "string",
          "string"
        ]
      ]
    },
    "load-balancer": {
      "value": [
        "147.228.173.103"
      ],
      "type": [
        "tuple",
        [
          "string"
        ]
      ]
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "local_file",
      "name": "hosts_cfg",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "[load-balancer]\n147.228.173.103\n\n[backend]\n147.228.173.181\n147.228.173.114\n147.228.173.182\n\n[all:vars]\nansible_user=root",
            "content_base64": null,
            "content_base64sha256": "OV5dtNADeOLnGCy8qS/4wcxafntMIiMZup+6GjyiQ8Q=",
            "content_base64sha512": "8cJfTiUUEhBARCTzsMbQ4sanxQUTDRMhgV/HentEicjp5J6IlhqmqNXXAjbrqKhmlrv4M8mnXNGT8yN960XWZg==",
            "content_md5": "da43d219cda4eca072e3b7c52f662550",
            "content_sha1": "7ed2e7fdf04a001ea7f97b4f0b392b0d805b842a",
            "content_sha256": "395e5db4d00378e2e7182cbca92ff8c1cc5a7e7b4c222319ba9fba1a3ca243c4",
            "content_sha512": "f1c25f4e25141210404424f3b0c6d0e2c6a7c505130d1321815fc77a7b4489c8e9e49e88961aa6a8d5d70236eba8a86696bbf833c9a75cd193f3237deb45d666",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "./dynamic_inventories/cluster",
            "id": "7ed2e7fdf04a001ea7f97b4f0b392b0d805b842a",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "dependencies": [
            "opennebula_virtual_machine.backend-node",
            "opennebula_virtual_machine.load-balancer"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "local_file",
      "name": "nginx_cfg",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "events {}\nhttp {\n    upstream backends {\n                server 147.228.173.181:5000;\n                server 147.228.173.114:5000;\n                server 147.228.173.182:5000;\n            }\n\n    server {\n        listen 80;\n\n        location / {\n            proxy_pass http://backends;\n        }\n    }\n}",
            "content_base64": null,
            "content_base64sha256": "GWWY51YJMM+2Mml6t81uBv3Mq1bwbHFtgxriB0VD2/o=",
            "content_base64sha512": "0BQTMLy9oFcZbzhpuIa+rs8oDQe++KUnZ704LWNLmd/bxdFEPLzAwa3VY4wP8lr/wRvf4n3Jky13eEnhBB9P0Q==",
            "content_md5": "c5e7e885ca59e842c0c4b8a59e96ded4",
            "content_sha1": "482f638e9212dabde57d84bf6429adb1302cb42d",
            "content_sha256": "196598e7560930cfb632697ab7cd6e06fdccab56f06c716d831ae2074543dbfa",
            "content_sha512": "d0141330bcbda057196f3869b886beaecf280d07bef8a52767bd382d634b99dfdbc5d1443cbcc0c1add5638c0ff25affc11bdfe27dc9932d777849e1041f4fd1",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "./ansible/roles/load-balancer/files/nginx.conf",
            "id": "482f638e9212dabde57d84bf6429adb1302cb42d",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "sensitive_content"
              }
            ]
          ],
          "dependencies": [
            "opennebula_virtual_machine.backend-node"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "opennebula_virtual_machine",
      "name": "backend-node",
      "provider": "provider[\"registry.terraform.io/opennebula/opennebula\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "context": {
              "HOSTNAME": "$NAME",
              "NETWORK": "YES",
              "SSH_PUBLIC_KEY": "ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBAFQSR2sa7zV8Y7FnAff7GcOX2pSKUbhtmUmlQYB6FBEvktrtrsO9Hl/cNKabWaoVo9QAKbw0yQYy/PUkPGq6/k22ABRDMu5Y7Y03MQxAmeNhGrZNG/sjlHtkuKV1Dc5s/wqmmIu75ybJG6AHrEBiNsbG+Id4IkFUQAyknhR2aTIfS+sgg== root@7d2d95265a24"
            },
            "cpu": 1,
            "cpumodel": [],
            "default_tags": {},
            "description": "Backend node VM #1",
            "disk": [
              {
                "cache": "",
                "computed_cache": "",
                "computed_dev_prefix": "sd",
                "computed_discard": "",
                "computed_driver": "raw",
                "computed_io": "",
                "computed_size": 12000,
                "computed_target": "vda",
                "computed_volatile_format": "raw",
                "dev_prefix": "",
                "discard": "",
                "disk_id": 0,
                "driver": "",
                "image_id": 687,
                "io": "",
                "size": 12000,
                "target": "vda",
                "volatile_format": "",
                "volatile_type": ""
              }
            ],
            "gid": 1,
            "gname": "users",
            "graphics": [
              {
                "keymap": "en-us",
                "listen": "0.0.0.0",
                "passwd": "",
                "port": "11054",
                "random_passwd": false,
                "type": "vnc"
              }
            ],
            "group": "users",
            "hard_shutdown": false,
            "id": "5154",
            "ip": "147.228.173.181",
            "keep_nic_order": null,
            "lcmstate": 3,
            "lock": null,
            "memory": 2048,
            "name": "backend-node-1",
            "nic": [
              {
                "computed_dns": "147.228.3.3",
                "computed_gateway": "147.228.173.1",
                "computed_ip": "147.228.173.181",
                "computed_mac": "52:54:00:17:30:b5",
                "computed_method": "",
                "computed_model": "",
                "computed_physical_device": "bond1",
                "computed_security_groups": [],
                "computed_virtio_queues": "",
                "dns": "",
                "gateway": "",
                "ip": "",
                "mac": "",
                "method": "",
                "model": "",
                "network": "vlan173",
                "network_id": 3,
                "network_mode_auto": false,
                "nic_id": 0,
                "physical_device": "",
                "sched_rank": "",
                "sched_requirements": "",
                "security_groups": null,
                "virtio_queues": ""
              }
            ],
            "on_disk_change": "swap",
            "os": [
              {
                "arch": "x86_64",
                "boot": "disk0"
              }
            ],
            "pending": false,
            "permissions": "600",
            "raw": [],
            "sched_ds_requirements": "",
            "sched_requirements": "",
            "state": 3,
            "tags": {
              "role": "backend"
            },
            "tags_all": {
              "role": "backend"
            },
            "template_disk": [],
            "template_id": -1,
            "template_nic": [],
            "template_section": [],
            "template_section_names": {},
            "template_tags": {},
            "timeout": 20,
            "timeouts": null,
            "uid": 418,
            "uname": "rosa",
            "vcpu": 1,
            "vmgroup": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "context": {
              "HOSTNAME": "$NAME",
              "NETWORK": "YES",
              "SSH_PUBLIC_KEY": "ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBAFQSR2sa7zV8Y7FnAff7GcOX2pSKUbhtmUmlQYB6FBEvktrtrsO9Hl/cNKabWaoVo9QAKbw0yQYy/PUkPGq6/k22ABRDMu5Y7Y03MQxAmeNhGrZNG/sjlHtkuKV1Dc5s/wqmmIu75ybJG6AHrEBiNsbG+Id4IkFUQAyknhR2aTIfS+sgg== root@7d2d95265a24"
            },
            "cpu": 1,
            "cpumodel": [],
            "default_tags": {},
            "description": "Backend node VM #2",
            "disk": [
              {
                "cache": "",
                "computed_cache": "",
                "computed_dev_prefix": "sd",
                "computed_discard": "",
                "computed_driver": "raw",
                "computed_io": "",
                "computed_size": 12000,
                "computed_target": "vda",
                "computed_volatile_format": "raw",
                "dev_prefix": "",
                "discard": "",
                "disk_id": 0,
                "driver": "",
                "image_id": 687,
                "io": "",
                "size": 12000,
                "target": "vda",
                "volatile_format": "",
                "volatile_type": ""
              }
            ],
            "gid": 1,
            "gname": "users",
            "graphics": [
              {
                "keymap": "en-us",
                "listen": "0.0.0.0",
                "passwd": "",
                "port": "11053",
                "random_passwd": false,
                "type": "vnc"
              }
            ],
            "group": "users",
            "hard_shutdown": false,
            "id": "5153",
            "ip": "147.228.173.114",
            "keep_nic_order": null,
            "lcmstate": 3,
            "lock": null,
            "memory": 2048,
            "name": "backend-node-2",
            "nic": [
              {
                "computed_dns": "147.228.3.3",
                "computed_gateway": "147.228.173.1",
                "computed_ip": "147.228.173.114",
                "computed_mac": "52:54:00:17:30:72",
                "computed_method": "",
                "computed_model": "",
                "computed_physical_device": "bond1",
                "computed_security_groups": [],
                "computed_virtio_queues": "",
                "dns": "",
                "gateway": "",
                "ip": "",
                "mac": "",
                "method": "",
                "model": "",
                "network": "vlan173",
                "network_id": 3,
                "network_mode_auto": false,
                "nic_id": 0,
                "physical_device": "",
                "sched_rank": "",
                "sched_requirements": "",
                "security_groups": null,
                "virtio_queues": ""
              }
            ],
            "on_disk_change": "swap",
            "os": [
              {
                "arch": "x86_64",
                "boot": "disk0"
              }
            ],
            "pending": false,
            "permissions": "600",
            "raw": [],
            "sched_ds_requirements": "",
            "sched_requirements": "",
            "state": 3,
            "tags": {
              "role": "backend"
            },
            "tags_all": {
              "role": "backend"
            },
            "template_disk": [],
            "template_id": -1,
            "template_nic": [],
            "template_section": [],
            "template_section_names": {},
            "template_tags": {},
            "timeout": 20,
            "timeouts": null,
            "uid": 418,
            "uname": "rosa",
            "vcpu": 1,
            "vmgroup": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        },
        {
          "index_key": 2,
          "schema_version": 0,
          "attributes": {
            "context": {
              "HOSTNAME": "$NAME",
              "NETWORK": "YES",
              "SSH_PUBLIC_KEY": "ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBAFQSR2sa7zV8Y7FnAff7GcOX2pSKUbhtmUmlQYB6FBEvktrtrsO9Hl/cNKabWaoVo9QAKbw0yQYy/PUkPGq6/k22ABRDMu5Y7Y03MQxAmeNhGrZNG/sjlHtkuKV1Dc5s/wqmmIu75ybJG6AHrEBiNsbG+Id4IkFUQAyknhR2aTIfS+sgg== root@7d2d95265a24"
            },
            "cpu": 1,
            "cpumodel": [],
            "default_tags": {},
            "description": "Backend node VM #3",
            "disk": [
              {
                "cache": "",
                "computed_cache": "",
                "computed_dev_prefix": "sd",
                "computed_discard": "",
                "computed_driver": "raw",
                "computed_io": "",
                "computed_size": 12000,
                "computed_target": "vda",
                "computed_volatile_format": "raw",
                "dev_prefix": "",
                "discard": "",
                "disk_id": 0,
                "driver": "",
                "image_id": 687,
                "io": "",
                "size": 12000,
                "target": "vda",
                "volatile_format": "",
                "volatile_type": ""
              }
            ],
            "gid": 1,
            "gname": "users",
            "graphics": [
              {
                "keymap": "en-us",
                "listen": "0.0.0.0",
                "passwd": "",
                "port": "11055",
                "random_passwd": false,
                "type": "vnc"
              }
            ],
            "group": "users",
            "hard_shutdown": false,
            "id": "5155",
            "ip": "147.228.173.182",
            "keep_nic_order": null,
            "lcmstate": 3,
            "lock": null,
            "memory": 2048,
            "name": "backend-node-3",
            "nic": [
              {
                "computed_dns": "147.228.3.3",
                "computed_gateway": "147.228.173.1",
                "computed_ip": "147.228.173.182",
                "computed_mac": "52:54:00:17:30:b6",
                "computed_method": "",
                "computed_model": "",
                "computed_physical_device": "bond1",
                "computed_security_groups": [],
                "computed_virtio_queues": "",
                "dns": "",
                "gateway": "",
                "ip": "",
                "mac": "",
                "method": "",
                "model": "",
                "network": "vlan173",
                "network_id": 3,
                "network_mode_auto": false,
                "nic_id": 0,
                "physical_device": "",
                "sched_rank": "",
                "sched_requirements": "",
                "security_groups": null,
                "virtio_queues": ""
              }
            ],
            "on_disk_change": "swap",
            "os": [
              {
                "arch": "x86_64",
                "boot": "disk0"
              }
            ],
            "pending": false,
            "permissions": "600",
            "raw": [],
            "sched_ds_requirements": "",
            "sched_requirements": "",
            "state": 3,
            "tags": {
              "role": "backend"
            },
            "tags_all": {
              "role": "backend"
            },
            "template_disk": [],
            "template_id": -1,
            "template_nic": [],
            "template_section": [],
            "template_section_names": {},
            "template_tags": {},
            "timeout": 20,
            "timeouts": null,
            "uid": 418,
            "uname": "rosa",
            "vcpu": 1,
            "vmgroup": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "opennebula_virtual_machine",
      "name": "load-balancer",
      "provider": "provider[\"registry.terraform.io/opennebula/opennebula\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "context": {
              "HOSTNAME": "$NAME",
              "NETWORK": "YES",
              "SSH_PUBLIC_KEY": "ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBAFQSR2sa7zV8Y7FnAff7GcOX2pSKUbhtmUmlQYB6FBEvktrtrsO9Hl/cNKabWaoVo9QAKbw0yQYy/PUkPGq6/k22ABRDMu5Y7Y03MQxAmeNhGrZNG/sjlHtkuKV1Dc5s/wqmmIu75ybJG6AHrEBiNsbG+Id4IkFUQAyknhR2aTIfS+sgg== root@7d2d95265a24"
            },
            "cpu": 1,
            "cpumodel": [],
            "default_tags": {},
            "description": "Load Balancer VM",
            "disk": [
              {
                "cache": "",
                "computed_cache": "",
                "computed_dev_prefix": "sd",
                "computed_discard": "",
                "computed_driver": "raw",
                "computed_io": "",
                "computed_size": 12000,
                "computed_target": "vda",
                "computed_volatile_format": "raw",
                "dev_prefix": "",
                "discard": "",
                "disk_id": 0,
                "driver": "",
                "image_id": 687,
                "io": "",
                "size": 12000,
                "target": "vda",
                "volatile_format": "",
                "volatile_type": ""
              }
            ],
            "gid": 1,
            "gname": "users",
            "graphics": [
              {
                "keymap": "en-us",
                "listen": "0.0.0.0",
                "passwd": "",
                "port": "11052",
                "random_passwd": false,
                "type": "vnc"
              }
            ],
            "group": "users",
            "hard_shutdown": false,
            "id": "5152",
            "ip": "147.228.173.103",
            "keep_nic_order": null,
            "lcmstate": 3,
            "lock": null,
            "memory": 2048,
            "name": "load-balancer",
            "nic": [
              {
                "computed_dns": "147.228.3.3",
                "computed_gateway": "147.228.173.1",
                "computed_ip": "147.228.173.103",
                "computed_mac": "52:54:00:17:30:67",
                "computed_method": "",
                "computed_model": "",
                "computed_physical_device": "bond1",
                "computed_security_groups": [],
                "computed_virtio_queues": "",
                "dns": "",
                "gateway": "",
                "ip": "",
                "mac": "",
                "method": "",
                "model": "",
                "network": "vlan173",
                "network_id": 3,
                "network_mode_auto": false,
                "nic_id": 0,
                "physical_device": "",
                "sched_rank": "",
                "sched_requirements": "",
                "security_groups": null,
                "virtio_queues": ""
              }
            ],
            "on_disk_change": "swap",
            "os": [
              {
                "arch": "x86_64",
                "boot": "disk0"
              }
            ],
            "pending": false,
            "permissions": "600",
            "raw": [],
            "sched_ds_requirements": "",
            "sched_requirements": "",
            "state": 3,
            "tags": {
              "role": "load-balancer"
            },
            "tags_all": {
              "role": "load-balancer"
            },
            "template_disk": [],
            "template_id": -1,
            "template_nic": [],
            "template_section": [],
            "template_section_names": {},
            "template_tags": {},
            "timeout": 20,
            "timeouts": null,
            "uid": 418,
            "uname": "rosa",
            "vcpu": 1,
            "vmgroup": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    }
  ],
  "check_results": null
}
